<html>

<head>
    <style>
        html, body {
            margin: 0;
            padding: 0;
        }
        canvas {
            width: 100%;
            height: 100%;
            cursor: help;
        }
    </style>
</head>

<body>
<script>
    const canvas = document.createElement('canvas')
    document.body.appendChild(canvas)
    canvas.width = window.innerWidth
    canvas.height = window.innerHeight
    const ctx = canvas.getContext('2d')

    /*ctx.fillStyle = '#99d6ff'
    ctx.beginPath()
    ctx.moveTo(25, 0)
    ctx.lineTo(40, 40)
    ctx.lineTo(25, 50)
    ctx.lineTo(10, 40)
    ctx.closePath()
    ctx.fill()
    
    ctx.beginPath()
    ctx.rect(0, 32, 50, 8)
    ctx.fill()

    ctx.fillStyle = 'gray'
    ctx.beginPath()
    ctx.rect(2, 20, 5, 12)
    ctx.fill()
    ctx.beginPath()
    ctx.rect(43, 20, 5, 12)
    ctx.fill()

    ctx.beginPath()
    ctx.arc(,36,7,Math.PI,2*Math.PI);
    ctx.fill()*/

    const arma1 = {
        x: -23,
        y: -16
    }
    const arma2 = {
        x: 18,
        y: -16
    }

    const player = {
            x: 0, y: 0,
            vel: 5,
            angle: 0,
            arma1, arma2,
            readyToShoot: true,
            lastShoot: 0

    }

    function render() {
        ctx.fillStyle = '#EEEEFF'
        ctx.fillRect(0, 0, canvas.width, canvas.height)
        if (keyboard.a && player.x > 10) player.x -= player.vel
        if (keyboard.d && player.x < canvas.width-10) player.x += player.vel
        if (keyboard.w && player.y > 10) player.y -= player.vel
        if (keyboard.s && player.y < canvas.height-10) player.y += player.vel

        ctx.save()  
        
        ctx.translate(player.x, player.y)
        ctx.rotate(player.angle+Math.PI/2)

        ctx.fillStyle = '#99d6ff'
        ctx.beginPath()
        ctx.moveTo(0, -36)
        ctx.lineTo(15, 4)
        ctx.lineTo(0, 14)
        ctx.lineTo(-15,4)
        ctx.closePath()
        ctx.fill()

        ctx.beginPath()
        ctx.rect(-25, -4, 50, 8)
        ctx.fill()

        ctx.fillStyle = 'gray'
        ctx.beginPath()
        ctx.rect(player.arma1.x,player.arma1.y, 5, 12)
        ctx.fill()
        ctx.beginPath()
        ctx.rect(player.arma2.x,player.arma2.y, 5, 12)
        ctx.fill()

        ctx.beginPath()
        ctx.arc(0,0,7,Math.PI,2*Math.PI);
        ctx.fill()
        ctx.restore()
        requestAnimationFrame(render)
    }
    requestAnimationFrame(render)
    const keyboard = {}

    document.addEventListener('keydown', function(event){
        keyboard[event.key] = true 
    })

    document.addEventListener('keyup', function(event){
        keyboard[event.key] = false
    })

    document.addEventListener('mousemove', function(event){
        var x = event.clientX - player.x
        var y = event.clientY - player.y
        player.angle =  Math.atan2(y,x)      
    })

    document.addEventListener('mousedown', function(event){

    })


</script>
</body>

</html>